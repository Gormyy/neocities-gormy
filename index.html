<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home</title>

  <script src="resources/js/apiEndpoints/config.js">//imports API configs</script>
  <script src="resources/js/apiEndpoints/fetchVisitorCount.js">//imports fetchVisitorCount()</script>
  <script src="resources/js/apiEndpoints/loadWeather.js">//imports loadWather()</script>
  <script src="resources/js/apiEndpoints/getBattery.js">//importing getBattery()</script>
  <script src="resources/js/apiEndpoints/fetchTime.js">//imports fetchTime()</script>
  <script src="resources/js/apiEndpoints/fetchLocation.js">//imports fetchLocation(user)</script>
  <script src="resources/js/utils/syncHeights.js">//imports syncHeights(content, right)</script>
  <script
    src="resources/js/utils/addNavigation.js">//adds addNavigation(div, pathToRoot = "", centered = true, navigationElements = "default") to add the navigation to the div bar</script>
  <link rel="stylesheet" href="resources/css/vaporeonStyle.css">
</head>

<body>
  <br><br><br>
  <div id="wrapper">
    <div id="navigationwrap">
      <div id="navigation">


      </div>

      <script>
        //script to add navigation elements
        let div = document.getElementById("navigation")
        addNavigation(div)
      </script>

    </div>
    <div id="contentwrap">
      <div id="content">

        <div class="title2"> <img
            src="https://64.media.tumblr.com/0b91ec3f6bd8e50404dc513ffbdf5821/014d6f73835b6e87-d3/s75x75_c1/f19c167835beae789c67e6721b3492325131958c.gifv">
          Hello!</div>
        <br>
        I'm Gormy! I really like the idea of neocities so I decided to make my own.
        I know how to code and stuff but I really really don't like making websites
        so I'm going to be using templates for most of this stuff and I'll probably be updating the site periodically
        but right now the site will be unfinished while i finish it!
        <br><br>
        <div class="title2"> <img
            src="https://64.media.tumblr.com/0b91ec3f6bd8e50404dc513ffbdf5821/014d6f73835b6e87-d3/s75x75_c1/f19c167835beae789c67e6721b3492325131958c.gifv">
          About</div>
        <br>
        This is my website! I haven't really finished it yet but you can follow updates <a
          href="interests.html">here!</a> Also you should go to the about page to learn more about me!
        <br><br>
        <div class="title2"> <img
            src="https://64.media.tumblr.com/0b91ec3f6bd8e50404dc513ffbdf5821/014d6f73835b6e87-d3/s75x75_c1/f19c167835beae789c67e6721b3492325131958c.gifv">
          Current Location</div>
        <p id="location">Location loading...</p>
        <br>
        If you're a friend you can find my precise location <a href="preciseLocation.html">here!</a>
        <br><br>
        <div class="title2"> <img
            src="https://64.media.tumblr.com/0b91ec3f6bd8e50404dc513ffbdf5821/014d6f73835b6e87-d3/s75x75_c1/f19c167835beae789c67e6721b3492325131958c.gifv">
          Take me to a ranodm page</div>
        <br>
        <center>
          <button class="rounded-btn" id="randomButton">I'm feeling lucky</button>
          <br><br>
        </center>
        <div class="title2"> <img src="https://64.media.tumblr.com/0b91ec3f6bd8e50404dc513ffbdf5821/014d6f73835b6e87-d3/s75x75_c1/f19c167835beae789c67e6721b3492325131958c.gifv">
          Visitor count!
        </div>
        <p id="visitorCount">loading...</p>
        <br>

        <div class="title2"> <img src="https://64.media.tumblr.com/0b91ec3f6bd8e50404dc513ffbdf5821/014d6f73835b6e87-d3/s75x75_c1/f19c167835beae789c67e6721b3492325131958c.gifv">
          Guestbook!
        </div>
        <p>Sign my guestbook <a href="otherStuff/guestbook/guestbook.html">here!</a> </p>
        <br>

        <script>

          async function loadVisitorCount() {
            let visitorCount = await fetchVisitorCount()
            let element = document.getElementById("visitorCount")
            if (visitorCount >= 0) {
              element.textContent = "You are visitor number " + visitorCount + " to my website! Welcome!";
            } else {
              element.textContent = "Unable to fetch visitor data :(";
            }
          }

          loadVisitorCount()

        </script>

      </div>
    </div>

    <div id="rightcolumnwrap">
      <div id="rightcolumn">

        <center>
          <img src="https://img.pokemondb.net/sprites/black-white/anim/normal/glaceon.gif" width="100" alt="x">
        </center><br>

        <div class="title"><img
            src="https://64.media.tumblr.com/171c295df37def8ea5bd3774fa3f2471/014d6f73835b6e87-e8/s75x75_c1/f2e8d21f39d3532d9cd06c05172782950d2625ad.gifv">
          Github</div>

        I made a github you can follow updates for the website <a
          href="https://github.com/Gormyy/neocities-gormy">here!</a>
        <br>
        You can also look at my other projects <a href="https://github.com/Gormyy">here!</a> I don't really have
        anything else interesting right now though

        <br><br>

        <div class="title"><img
            src="https://64.media.tumblr.com/171c295df37def8ea5bd3774fa3f2471/014d6f73835b6e87-e8/s75x75_c1/f2e8d21f39d3532d9cd06c05172782950d2625ad.gifv">
          Weather</div>

        <p>The current weather for me: </p>
        <p id="weather">Weather loading...</p>

        <script>
          async function addWeather() {
            let weatherElement = document.getElementById("weather")
            let data = await loadWeather()
            if (data) {
              const temperature = Math.round(data.main.feels_like);
              const windSpeed = Math.round(data.wind.speed);
              const description = data.weather[0].description;

              const weatherText = `It is currently ${temperature}Â° with ${description}, and the wind is blowing at ${windSpeed} mph.`;

              weatherElement.textContent = weatherText
            } else {
              weatherElement.textContent = "Unable to fetch weather data.";
            }
          }

          addWeather();
        </script>

        <div class="title">
          <img
            src="https://64.media.tumblr.com/171c295df37def8ea5bd3774fa3f2471/014d6f73835b6e87-e8/s75x75_c1/f2e8d21f39d3532d9cd06c05172782950d2625ad.gifv">
          Time
        </div>

        <p>The current time for me is <span id="time"></span> </p>

        <script>
          async function loadTime() {
            try {
              
              const data = await fetchTime();
              if(!data){ //error fetching data
                let x = 4 / 0; //purposefully throw error :3
              }

              let date = new Date(data.formattedTime.replace(" ", "T")); // Parse "YYYY-MM-DD HH:MM:SS"

              function formatTime(d) {
                const options = {
                  year: 'numeric', month: 'long', day: 'numeric',
                  hour: 'numeric', minute: '2-digit', second: '2-digit',
                  hour12: true
                };
                return d.toLocaleString(undefined, options).replace(',', ' at');
              }

              function updateTimeDisplay() {
                document.getElementById("time").textContent = formatTime(date);
              }

              updateTimeDisplay();

              // Increment time every second
              setInterval(() => {
                date.setSeconds(date.getSeconds() + 1);
                updateTimeDisplay();
              }, 1000);

            } catch (err) {
              console.error("Failed to load time:", err);
              document.getElementById("time").textContent = "Unable to fetch time.";
            }
          }

          loadTime();
        </script>

        <div class="title">
          <img
            src="https://64.media.tumblr.com/171c295df37def8ea5bd3774fa3f2471/014d6f73835b6e87-e8/s75x75_c1/f2e8d21f39d3532d9cd06c05172782950d2625ad.gifv">
          Battery
        </div>
        <p>My phone is currently at <span id="battery"></span>% battery</p>
        <br>

        <script>
          /*
          async function getBattery(){ //returns battery percentage
            const res = await fetch('https://gormysecret.onrender.com/battery/getBattery?format=json');
            const data = await res.json();
            return data.battery
          }
            */

          async function changeBattery() { //loads battery element
            let batEl = document.getElementById("battery").textContent = await getBattery()
          }
          //script to add battery percentage
          changeBattery()
        </script>

        <script>
          function callSyncHeights(){
            const content = document.getElementById('content');
            const right = document.getElementById('rightcolumn');
            syncHeights(content, right)
          }

          window.addEventListener('DOMContentLoaded', callSyncHeights);
        </script>

      </div>
    </div>


    <div id="footerwrap">
      <div id="footer">
        Layout: <a href="http://itinerae.neocities.org" target="_blank">Itinerae</a> Pixels: <a
          href="https://foollovers.com/" target="_blank">Fool Lovers</a> Lace border: <a
          href="https://pastebin.com/1s0bztqb" target="_blank">Loveberry</a>
      </div>
    </div>
  </div>

  <script>
    async function updateLocation(){
      const locationEl = document.getElementById('location')
      const data = await fetchLocation()
      if (data){
        const { city, state, country } = data;
        const locationText = `${city ? city + ', ' : ''}${state ? state + ', ' : ''}${country}`;
        locationEl.textContent = locationText || 'Location not available';
      } else{
        locationEl.textContent = 'Error retrieving location';
      }
    }

    updateLocation()
  </script>

  <script>
    document.getElementById('randomButton').addEventListener('click', function () {
      const websiteWeights = {
        'index.html': 100,
        'about.html': 100,
        'art.html': 100,
        'interests.html': 100,
        'main.html': 100,
        'not_found.html': 25,
        'neocities.png': 50,
        'preciseLocation.html': 100,
        'robots.txt': 25,
        'style.css': 10,
        'passwords.html': 3,
        'travel.html': 100,
        'stickers.html': 100,
        "interests/travel/flights.html": 100,
        'updates.html': 100, 
        "galleries/interestGallery/randomImageGallery.html": 100,
        "interests/climbing.html" : 100,
        "interests/coding.html" : 100,
        "interests/music.html" : 100,
        "interests/sports.html" : 100,
        "interests/weather.html" : 100,
        "otherStuff/guestbook/guestbook.html" : 100,
        './games/slots/slotMachine.html': 100,
        './games/slots/leaderboard.html': 100,
        './games/slots/accountSettings.html': 100,
        './games/slots/payoutTable.html': 100,
        'https://www.spc.noaa.gov/': 5,
        'https://github.com/Gormyy/neocities-gormy': 5,
        'https://en.wikipedia.org/wiki/Jon_Bois': 5,
        'https://bsky.app/profile/gormy.bsky.social': 5,
        'https://bulbapedia.bulbagarden.net/wiki/Glaceon_(Pok%C3%A9mon)': 5,
        "https://www.nhl.com/blues/": 5,
        "https://www.hockey-reference.com/boxscores/201905070STL.html": 1,
        "https://www.youtube.com/watch?v=dQw4w9WgXcQ": 15,
        "https://github.com/Gormyy/neocities-gormy": 20,
        "https://github.com/Gormyy": 5,
        "https://discord.gg/Er2wz9mqDc": 15,
        "https://discord.gg/ycF9v2V": 15,
        "https://discord.gg/XMsWtzm9Hq": 0, // this is just a reward for snooping around my website lol
        "https://gormysecret.onrender.com/visitorCount": 2,
        "https://gormysecret.onrender.com/weather?format=json": 2,
        "https://gormysecret.onrender.com/time?format=json": 2,
        "https://gormysecret.onrender.com/location?format=json": 2,
        "about:blank": 5,
        "galleries/base.html": 25,
        "resources/css/galleryStyle.css": 10,
        "otherStuff/infiniteLoop/loop2.html" : 1,
        "resources/backgrounds/yellowTile.jpg" : 10,
        "resources/css/galleryStyle.css" : 10,
        "resources/css/ghostKittyStyle.css" : 10,
        "resources/css/jolteonStyle.css" : 10,
        "resources/css/kittyStyle.css" : 10,
        "resources/css/slotStyle.css" : 10,
        "resources/css/vaporeonStyle.css" : 10,
        "resources/js/utils/addNavigation.js" : 10,
        "resources/js/utils/cookieUtils.js" : 10,
        "resources/js/utils/galleryUtils.js" : 10,
        "resources/js/utils/getDeterministicColor.js" : 10,
        "resources/js/utils/loadBlogs.js" : 10,
        "resources/js/utils/syncHeights.js" : 10,
        "resources/js/utils/timeUtils.js" : 10,
        "resources/js/miscStuff/fillColumnWithRandomImages.js" : 5,
        "resources/js/miscStuff/sumValuesDict.js" : 5,
        "resources/js/apiEndpoints/config.js" : 3,
        "resources/js/apiEndpoints/fetchLocation.js" : 3,
        "resources/js/apiEndpoints/fetchTime.js" : 3,
        "resources/js/apiEndpoints/fetchVisitorCount.js" : 3,
        "resources/js/apiEndpoints/getBattery.js" : 3,
        "resources/js/apiEndpoints/loadMessages.js" : 3,
        "resources/js/apiEndpoints/loadWeather.js" : 3,
        "resources/js/apiEndpoints/postComment.js" : 3,
        
      };

      const weightedList = [];

      for (const [url, weight] of Object.entries(websiteWeights)) {
        for (let i = 0; i < weight; i++) {
          weightedList.push(url);
        }
      }

      const randomUrl = weightedList[Math.floor(Math.random() * weightedList.length)];

      window.location.href = randomUrl;
    });

  </script>
</body>

</html>