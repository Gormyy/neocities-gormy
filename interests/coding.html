<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coding</title>

  <script src="../resources/js/apiEndpoints/config.js">//imports API configs</script>
  <script src="../resources/js/utils/syncHeights.js">//imports syncHeights(content, right)</script>
  <script src="../resources/js/utils/addNavigation.js">//adds addNavigation(div, pathToRoot = "", centered = true, navigationElements = "default") to add the navigation to the div bar</script>
  <script src="../resources/js/apiEndpoints/codingEndpoints/getGithubInfo.js">//imports getGithubInfo(repo)</script>
  <script src="../resources/js/apiEndpoints/codingEndpoints/getDbStats.js">//imports getDbStats()</script>
  <script src="../resources/js/apiEndpoints/codingEndpoints/getNeocitiesStats.js">//imports getNeocitiesStats()</script>
  <script src="../resources/js/utils/timeUtils.js">//For importing format date</script>
  <script src="../resources/js/miscStuff/conversions.js">//Imports conversions</script>
  <script src="../resources/js/miscStuff/sumValuesDict.js">//Imports sum values dict</script>
  <link rel="stylesheet" href="../resources/css/jolteonStyle.css">
</head>

<body>

  <br><br><br>
  <div id="wrapper">
    <div id="navigationwrap">
      <div id="navigation">

      </div>
    </div>

    <script>
        //script to add navigation elements
        let div = document.getElementById("navigation")
        addNavigation(div, "../")
    </script>

    <div id="contentwrap">
      <div id="content">

        <div class="title2"> <img src="../resources/styleImages/arrowYellog.png"> Overview </div>
        <p>
          This page is mainly a landing page for me to talk about the different aspects of this website, and I'll also have 
          links to pages that go a bit more in-depth about each individual aspect. Currently, my website has three main components
          the front-end (the website), the backend, and the database. Each of these aspects are sort of their own stand-alone 
          system that help make the website run!
        </p>
        <br>
        <div class="title2"> <img src="../resources/styleImages/arrowYellog.png"> <a href="coding/frontend.html">Front-end</a> </div>
        <p>
          The front-end of this site is hosted on <a href="https://neocities.org/">Neocities!</a> which is a website that allows you 
          to host static websites for free! There are some limitations with hosting on neocities, most notably, they have a very
          small storage limit for free accounts (1gb), they also only allow you to use 200gb of bandwidth each month, which 
          makes it a bit hard to host a commercial site on neocities, and they limit what filetypes you can upload to your site
          but this amount should be more than enough to host a basic website with. If you host your images on an external site
          such as <a href="https://postimages.org/">postimages</a> you shouldn't ever run out of storage for your site. Personally,
          I just got supporter for $5 a month and got too lazy to keep uploading images to a different site, so I just host my images
          on this site now. I am really bad with design of sites so I mostly used templates for the design of these pages, but everything
          else on the website, including the code was done completely by me. If you want to learn more about the design of the website
          click <a href="coding/frontend.html">here!</a> Or you can also just click the title of this section.
        </p>
        <br>
        <div class="title2"> <img src="../resources/styleImages/arrowYellog.png"> <a href="coding/backend.html">Backend</a> </div>
        <p>
          The problem with hosting a page on just neocities is that I don't want an entirely static site. I want to have stuff that changes
          based off of various different things. The first thing that I wanted to do that couldn't be done on a static site was add my current 
          location to my page. This was hard because I don't want my exact location to be publicly accesible, but I'm fine with having the city I'm in
          be publicly accesible. So in order to do that. I created an API to serve all the information needed on my website. This API is hosted on 
          <a href="https://render.com/">Render</a>, and it serves as the middleman between my data source, and my publicly accesible website. If you
          want to learn more about the design of my website's backend, click <a href="coding/backend.html">here!</a> Or you can also just click the title
          of this section.
        </p>
        <br>
        <div class="title2"> <img src="../resources/styleImages/arrowYellog.png"> <a href="coding/database.html">Database</a> </div>
        <p>
          One problem with just having an API to serve the website is that you can't really have any persistent data with just an API.
          Some sort of database is needed for persistent database, because a normal javascript project is not going to save data when
          reloaded. This became a problem when I was creating the <a href="../games/slots/slotMachine.html">slots</a> game for this website
          because I wanted to have a simple login system with the slots so that the website could keep track of everyone's money and so that
          people can login to their slots account and save their progress on different devices. To fix this, I created a database which is
          hosted on <a href="https://supabase.com/">supabase.</a> This database does not have a publicly accesible endpoint because I really
          don't want the information to be publicly accesible. But much of its data is served and managed by the backend API that I made. As of
          now it mostly keeps track of slots stuff, but I also use it to hold the comments from my <a href="../about.html">about</a> page, 
          and the logs from my <a href="../otherStuff/guestbook/guestbook.html">guest book</a>. I do have to be careful about how much I store
          on the database because the free plan only has .5gb of storage and I'm unemployed rn so I don't want to spend too much money monthly
          on this, so I'll either have to find a job or figure out how to self-host the database if it gets too big. If you want to learn more
          about the design of my database click <a href="coding/database.html">here!</a> Or you can also just click the title
          of this section.
        </p>
        <br>
        <div class="title2"> <img src="../resources/styleImages/arrowYellog.png"> <a href="coding/Blogs.html">Blogs</a> </div>
        <p>
          I also have a coding-specific blog page where I talk about just random coding related things that don't fit into the scope of this website.
          You can read those <a href="coding/Blogs.html">here!</a> Or you can also just click the title of this section.
        </p>
        <br>
      </div>
    </div>


    <div id="rightcolumnwrap">
      <div id="rightcolumn">

        <center>
          <img src="https://img.pokemondb.net/sprites/black-white/anim/normal/jolteon.gif" width="100" alt="x">
        </center><br>
        <br>
        <div class="title"><img src="https://64.media.tumblr.com/171c295df37def8ea5bd3774fa3f2471/014d6f73835b6e87-e8/s75x75_c1/f2e8d21f39d3532d9cd06c05172782950d2625ad.gifv"> Website stats</div>
        <center><b>Last update   </b><br><span id="websiteLastUpdate"></span>    </center><br>
        <center><b>Commits       </b><br><span id="websiteNumCommits"></span>    </center><br>
        <center><b>Files         </b><br><span id="websiteNumOfFiles"></span>    </center><br>
        <center><b>Lines of code </b><br><span id="websiteLinesOfCode"></span>   </center><br>
        <br><br>

        <div class="title"><img src="https://64.media.tumblr.com/171c295df37def8ea5bd3774fa3f2471/014d6f73835b6e87-e8/s75x75_c1/f2e8d21f39d3532d9cd06c05172782950d2625ad.gifv"> Backend stats</div>
        <center><b>Last update   </b><br><span id="backendLastUpdate"></span>    </center><br>
        <center><b>Commits       </b><br><span id="backendNumCommits"></span>    </center><br>
        <center><b>Files         </b><br><span id="backendNumOfFiles"></span>    </center><br>
        <center><b>Lines of code </b><br><span id="backendLinesOfCode"></span>   </center><br>
        <br><br>

        <div class="title"><img src="https://64.media.tumblr.com/171c295df37def8ea5bd3774fa3f2471/014d6f73835b6e87-e8/s75x75_c1/f2e8d21f39d3532d9cd06c05172782950d2625ad.gifv"> DB stats</div>
        <center><b>Tables            </b><br><span id="dbTables"></span>         </center><br>
        <center><b>Views             </b><br><span id="dbViews"></span>          </center><br>
        <center><b>Functions         </b><br><span id="dbFunctions"></span>      </center><br>
        <center><b>Rows              </b><br><span id="dbRows"></span>           </center><br>
        <center><b>Size              </b><br><span id="dbSize"></span>           </center><br>

        <br><br>
        <div class="title"><img src="https://64.media.tumblr.com/171c295df37def8ea5bd3774fa3f2471/014d6f73835b6e87-e8/s75x75_c1/f2e8d21f39d3532d9cd06c05172782950d2625ad.gifv"> Site stats</div>
        <center><b>Views             </b><br><span id="neocitiesViews"></span>   </center><br>
        <center><b>Hits              </b><br><span id="neocitiesHits"></span>    </center><br>
      </div>
    </div>

    <script>
        //loads github data
        async function loadWebsiteData(){
            const result = await getGithubInfo();

            const date = formatDateCustom(result.lastUpdateTime)
            const commits = result.commits
            const numFiles = result.numFiles
            const linesOfCode = sumValuesDict(result.linesOfCode)

            document.getElementById("websiteLastUpdate").textContent  = date
            document.getElementById("websiteNumCommits").textContent  = commits
            document.getElementById("websiteNumOfFiles").textContent  = numFiles
            document.getElementById("websiteLinesOfCode").textContent = linesOfCode

        }

        async function loadBackendData(){
            const result = await getGithubInfo("GormySecret");

            const date = formatDateCustom(result.lastUpdateTime)
            const commits = result.commits
            const numFiles = result.numFiles
            const linesOfCode = sumValuesDict(result.linesOfCode)

            document.getElementById("backendLastUpdate").textContent  = date
            document.getElementById("backendNumCommits").textContent  = commits
            document.getElementById("backendNumOfFiles").textContent  = numFiles
            document.getElementById("backendLinesOfCode").textContent = linesOfCode
        }

        async function loadDbStats(){
            const result = await getDbStats();

            const {tables, views, functions, estimated_rows, database_size_bytes} = result

            const mb = bytesToMB(database_size_bytes).toFixed(1)

            document.getElementById("dbTables").textContent    = tables
            document.getElementById("dbViews").textContent     = views
            document.getElementById("dbFunctions").textContent = functions
            document.getElementById("dbRows").textContent      = estimated_rows
            document.getElementById("dbSize").textContent      = mb + "mb"

        }

        async function loadNeocitiesStats(){
          const result = await getNeocitiesStats();
          const views = result.views
          const hits = result.hits

          document.getElementById("neocitiesHits").textContent = hits
          document.getElementById("neocitiesViews").textContent = views
        }

        function callSyncHeights(){
            const content = document.getElementById('content');
            const right = document.getElementById('rightcolumn');
            syncHeights(content, right)
          }

        
        window.addEventListener('DOMContentLoaded', callSyncHeights);
        loadWebsiteData()
        loadBackendData()
        loadDbStats()
        loadNeocitiesStats()
    </script>


    <div id="footerwrap">
      <div id="footer">
        Layout: <a href="http://itinerae.neocities.org" target="_blank">Itinerae</a> Pixels: <a
          href="https://foollovers.com/" target="_blank">Fool Lovers</a> Lace border: <a
          href="https://pastebin.com/1s0bztqb" target="_blank">Loveberry</a>
      </div>
    </div>
  </div>

</body>

</html>